@startuml pawnPromotion
|Player|
start
:Pawn moves to the last rank;

|System|
:System prompts for promotion choice;

repeat
    :Player chooses a piece for promotion;

    |System|
    :Check if the chosen piece is one of the valid options (Queen, Rook, Bishop, Knight);

    if (Piece valid?) then (yes)
        :Replace pawn with the chooses piece;
        :Update game state; 

        :Check for checkmate;
        if (Game over ?) then (yes)
            :Show notification "Game over";
        else (no)
            :Check for stalemate;
            if (Stalemate?) then (yes)
                :Show notification "Stalemate";
            else (no)
                :Switch player;
            endif
        endif
        stop
    else (no)
        :Display "Invalid promotion choice";     
    endif
repeat while (Chooses again)

@enduml
